var deferredPrompt,enableNotificationsButtons=document.querySelectorAll(".enable-notifications");function configurePushSub(){var i;"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){return i=e,e.pushManager.getSubscription()}).then(function(e){if(null===e){var n=urlBase64ToUint8Array("BBq2LFlh9tntYdZA-XtAt7CnOa7Zx4STdM8AV5y8p-vxOf0NfvntuTuM_E-NHRksH-915tFcVai407a-Gp-VVdY");return i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n})}}).then(function(i){return fetch("https://pwa-practice-app-289604.firebaseio.com/subscriptions.json",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)})}).then(function(i){i.ok&&displayConfirmNotification()}).catch(function(i){console.error(i)})}function askForNotificationPermission(){Notification.requestPermission(i=>{console.log("user choice",i),"granted"!==i?console.log("permission denied."):configurePushSub()})}function displayConfirmNotification(){if("serviceWorker"in navigator){var i={body:"You subscribed to notifications. Yay!",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boat.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirm-notification",renotify:!0,actions:[{action:"confirm",title:"Okay",icon:"/src/images/icons/app-icon-96x96.png"},{action:"cancel",title:"Cancel",icon:"/src/images/icons/app-icon-96x96.png"}]};navigator.serviceWorker.ready.then(e=>{e.showNotification("Successfully Subscribed (from SW!)",i)})}}window.Promise&&(window.Promise=Promise),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(()=>{console.log("service worker registered.")}).catch(function(i){console.error(i)}),window.addEventListener("beforeinstallprompt",function(i){return console.log("beforeinstallprompt fired"),i.preventDefault(),deferredprompt=i,!1}),"Notification"in window&&"serviceWorker"in navigator&&enableNotificationsButtons.forEach(i=>{i.style.display="inline-block",i.addEventListener("click",askForNotificationPermission)});